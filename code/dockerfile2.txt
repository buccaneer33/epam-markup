FROM ubuntu

#Install node.js
RUN apt-get update
RUN apt-get -y upgrade
#RUN apt-get install -y curl
RUN apt-get install -y npm
#RUN curl -sL https://deb.nodesource.com/setup_6.x |  bash -
#RUN apt-get install -y nodejs
#RUN node -v

#make webpack global
#RUN npm install webpack -g

# Create app directory
WORKDIR /app

# Install application dependencies
COPY package*.json /app

# Install app dependencies
RUN cd /app && \npm install

#Bundle app source
COPY src /src
    
# Start building project 
RUN npm run build

# Expose port
EXPOSE 8080

# Start server
CMD [ "npm", "server.js" ]
